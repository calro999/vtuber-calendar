<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xè¡¨ç¤ºãƒ†ã‚¹ãƒˆğŸ€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'M PLUS Rounded 1c', sans-serif; background-color: #f0f2f5; }
        .nav-btn { cursor: pointer; padding: 10px 20px; border-radius: 999px; font-weight: bold; background: white; border: 2px solid #ddd; }
        .nav-btn.active { background: #1da1f2; color: white; border-color: #1da1f2; }
        .hidden { display: none; }
        .test-card { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
    </style>
</head>
<body class="p-4 md:p-8">

    <header class="text-center mb-8">
        <h1 class="text-2xl font-bold mb-6">ğŸ› ï¸ Xï¼ˆTwitterï¼‰è¡¨ç¤ºãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰</h1>
        <div class="flex justify-center gap-4">
            <button id="tabMain" class="nav-btn" onclick="switchTab('main')">âœ¨ é…ä¿¡ä¸€è¦§(GAS)</button>
            <button id="tabTest" class="nav-btn active" onclick="switchTab('test')">ğŸ” Xè¡¨ç¤ºãƒ†ã‚¹ãƒˆ</button>
        </div>
    </header>

    <main id="viewMain" class="hidden">
        <div id="upcomingList" class="grid grid-cols-1 md:grid-cols-2 gap-6 text-center text-gray-400">
            GASã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å¾…ã¡...
        </div>
    </main>

    <section id="viewTest" class="max-w-2xl mx-auto">
        <div class="test-card">
            <h3 class="font-bold mb-4 text-blue-500">1. æŒ‡å®šã•ã‚ŒãŸURLï¼ˆé€šå¸¸ï¼‰</h3>
            <blockquote class="twitter-tweet" data-dnt="true">
                <a href="https://x.com/calro_shorts/status/2004852201714581550"></a>
            </blockquote>
        </div>

        <div class="test-card">
            <h3 class="font-bold mb-4 text-blue-500">2. æŒ‡å®šã•ã‚ŒãŸURLï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ãï¼‰</h3>
            <blockquote class="twitter-tweet" data-dnt="true">
                <a href="https://x.com/calro_shorts/status/2004852201714581550?s=20"></a>
            </blockquote>
        </div>

        <div class="test-card">
            <h3 class="font-bold mb-4 text-green-500">3. æ¯”è¼ƒç”¨ï¼ˆXå…¬å¼ãƒã‚¹ãƒˆï¼‰</h3>
            <p class="text-xs mb-2">â€»1ã¨2ãŒæ¶ˆãˆã¦ã„ã¦ã€ã“ã‚ŒãŒè¡¨ç¤ºã•ã‚Œã‚‹ãªã‚‰ã€URLï¼ˆIDï¼‰ãŒç„¡åŠ¹ãªå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
            <blockquote class="twitter-tweet" data-dnt="true">
                <a href="https://x.com/X/status/1683498144214831104"></a>
            </blockquote>
        </div>
    </section>

    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

    <script>
        const GAS_URL = "https://script.google.com/macros/s/AKfycbw5zrtCgsZDoX3dZ6Dvup_X3Ej2-GNO5Gr8UzLUsTEi8idPnW--1bU4bZ4KcSAMiZcH/exec"; 

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tab) {
            document.getElementById('viewMain').classList.toggle('hidden', tab !== 'main');
            document.getElementById('viewTest').classList.toggle('hidden', tab !== 'test');
            document.getElementById('tabMain').classList.toggle('active', tab === 'main');
            document.getElementById('tabTest').classList.toggle('active', tab === 'test');
            
            // ã‚¿ãƒ–ã‚’åˆ‡ã‚Šæ›¿ãˆãŸç¬é–“ã«Xã®å†èª­ã¿è¾¼ã¿ã‚’å‘½ä»¤ã™ã‚‹
            if (window.twttr && twttr.widgets) {
                twttr.widgets.load();
            }
        }

        // GASå´ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ã«æ®‹ã™ï¼‰
        async function fetchSchedules() {
            try {
                const res = await fetch(GAS_URL);
                const data = await res.json();
                const listEl = document.getElementById('upcomingList');
                listEl.innerHTML = '';
                data.forEach(item => {
                    listEl.innerHTML += `
                        <div class="bg-white p-4 rounded-xl shadow">
                            <p>${item.name} / ${item.time}</p>
                            <blockquote class="twitter-tweet"><a href="${item.url}"></a></blockquote>
                        </div>
                    `;
                });
                if (window.twttr) twttr.widgets.load();
            } catch (e) { console.error(e); }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ
        window.onload = () => {
            fetchSchedules();
        };
    </script>
</body>
</html>